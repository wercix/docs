<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue Vixens Workshops | üìã Chapter 3: Connect your Project to an API</title>
    <meta name="description" content="Workshops to teach web and mobile development with Vue.js to beginners">
    <link rel="icon" href="/docs/favicon.png">
    
    <link rel="preload" href="/docs/assets/css/15.styles.55f7aaf7.css" as="style"><link rel="preload" href="/docs/assets/js/app.7918803b.js" as="script"><link rel="preload" href="/docs/assets/js/7.3168eb2d.js" as="script"><link rel="prefetch" href="/docs/assets/js/0.8d771a8b.js"><link rel="prefetch" href="/docs/assets/js/1.fa456c20.js"><link rel="prefetch" href="/docs/assets/js/2.db38580f.js"><link rel="prefetch" href="/docs/assets/js/3.77c53ce6.js"><link rel="prefetch" href="/docs/assets/js/4.98680524.js"><link rel="prefetch" href="/docs/assets/js/5.a368cb6c.js"><link rel="prefetch" href="/docs/assets/js/6.a6a0af95.js"><link rel="prefetch" href="/docs/assets/js/8.1ce82967.js"><link rel="prefetch" href="/docs/assets/js/9.ce8241d9.js"><link rel="prefetch" href="/docs/assets/js/10.22661102.js"><link rel="prefetch" href="/docs/assets/js/11.ad2936e7.js"><link rel="prefetch" href="/docs/assets/js/12.df833fe7.js"><link rel="prefetch" href="/docs/assets/js/13.fa142ba8.js"><link rel="prefetch" href="/docs/assets/js/14.ed56d954.js">
    <link rel="stylesheet" href="/docs/assets/css/15.styles.55f7aaf7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/" class="home-link router-link-active"><!----><span class="site-name">
      Vue Vixens Workshops
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://www.vuevixens.org" target="_blank" rel="noopener noreferrer" class="nav-link">Team</a></div><div class="nav-item"><a href="/docs/workshop/CODE_OF_CONDUCT.html" class="nav-link">Code of Conduct</a></div><a href="https://github.com/vuevixens/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://www.vuevixens.org" target="_blank" rel="noopener noreferrer" class="nav-link">Team</a></div><div class="nav-item"><a href="/docs/workshop/CODE_OF_CONDUCT.html" class="nav-link">Code of Conduct</a></div><a href="https://github.com/vuevixens/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/docs/workshop/" class="sidebar-link">About Vue Vixens Workshops</a></li><li><a href="/docs/workshop/ch1.html" class="sidebar-link">üê∂ Chapter 1: Introducing the My Pet Shop Web App</a></li><li><a href="/docs/workshop/ch2.html" class="sidebar-link">üê∂ Chapter 2: Build a Pet Gallery</a></li><li><a href="/docs/workshop/ch3.html" class="active sidebar-link">üê∂ Chapter 3: Connect your Project to an API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/workshop/ch3.html#instructions" class="sidebar-link">Instructions</a></li><li class="sidebar-sub-header"><a href="/docs/workshop/ch3.html#add-axios" class="sidebar-link">Add Axios</a></li><li class="sidebar-sub-header"><a href="/docs/workshop/ch3.html#call-the-api" class="sidebar-link">Call the API</a></li><li class="sidebar-sub-header"><a href="/docs/workshop/ch3.html#use-the-api-1-replace-some-of-the-static-data" class="sidebar-link">Use the API 1 - Replace Some of the Static Data</a></li><li class="sidebar-sub-header"><a href="/docs/workshop/ch3.html#use-the-api-2-randomize-the-images" class="sidebar-link">Use the API 2- Randomize the Images</a></li></ul></li><li><a href="/docs/workshop/ch4.html" class="sidebar-link">üê∂ Chapter 4: Create a Dog Adoption Experience</a></li><li><a href="/docs/workshop/ch5.html" class="sidebar-link">üê∂ Chapter 5: Complete the Adoption Experience with a Form</a></li><li><a href="/docs/workshop/ch6.html" class="sidebar-link">üê∂ Chapter 6: My First Mobile App: Tindogs</a></li><li><a href="/docs/workshop/mini1.html" class="sidebar-link">üêæ Mini Workshop 1: Build A Web App to Fetch &amp; Like Pets</a></li><li><a href="/docs/workshop/mini2.html" class="sidebar-link">üêæ Mini Workshop 2: Build a Mobile App to Choose a Pet</a></li><li><a href="/docs/workshop/mini3.html" class="sidebar-link">üåà Mini Workshop 3: Build A Rainbow/Unicorn App that Lights up a Photon!</a></li></ul></div><div class="page"><div class="content"><h1 id="üìã-chapter-3-connect-your-project-to-an-api"><a href="#üìã-chapter-3-connect-your-project-to-an-api" aria-hidden="true" class="header-anchor">#</a> üìã Chapter 3: Connect your Project to an API</h1><table><thead><tr><th><strong>Project¬†Goal</strong></th><th>Learn how API calls work and how to implement them in your web app</th></tr></thead><tbody><tr><td><strong>What¬†you‚Äôll¬†learn</strong></td><td>Using the <a href="https://dog.ceo/dog-api/" target="_blank" rel="noopener noreferrer">DogCEO API</a> you will load dog images dynamically, instead of using dummy data</td></tr><tr><td><strong>Tools¬†you‚Äôll¬†need</strong></td><td>A modern browser like Chrome. If using Chrome, download Chrome DevTools for Vue.js. An account in CodeSandbox.io. If you get lost, import the starting point for this chapter <a href="https://github.com/VueVixens/projects/tree/master/chapter-2-end" target="_blank" rel="noopener noreferrer">here</a>. Instructions on how to do this are in <a href="/docs/workshop/appendix_1.html">Appendix 1</a></td></tr><tr><td><strong>Time needed to complete</strong></td><td>1 hour</td></tr></tbody></table><h2 id="instructions"><a href="#instructions" aria-hidden="true" class="header-anchor">#</a> Instructions</h2><p>If you need to restart your project, clone <a href="https://github.com/VueVixens/projects/tree/master/chapter-1-end" target="_blank" rel="noopener noreferrer">this repo</a> into Code Sandbox after logging in.</p><p>So far, we have placed images of dogs onto our screens via some static JSON data that we imported into a component. That's great for demo purposes, but in real life, you're almost always going to build web apps that consume real data that's coming from either your own data sources, or externally, from somewhere on the internet. Let's learn how to consume third-party data.</p><p>To perform API calls we will need a library called <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">axios</a>. It's a promise-based HTTP client that works both in the browser and in a node.js environment.</p><div class="tip custom-block"><p class="custom-block-title">üí°</p><p>Originally, Vue supported its own way of making API calls using .ajax; but this resource was deprecated as Axios's standalone library worked very well for this purpose, removing the need for an integrated solution. Read more about this decision <a href="https://medium.com/the-vue-point/retiring-vue-resource-871a82880af4" target="_blank" rel="noopener noreferrer">here</a>.</p></div><h2 id="add-axios"><a href="#add-axios" aria-hidden="true" class="header-anchor">#</a> Add Axios</h2><p>First, add Axios's library to your project dependencies. To do so in Code Sandbox, click on <code>File Editor</code> tab -&gt; <code>Dependencies</code> -&gt; <code>Add Dependency</code> and search for <code>axios</code></p><p>Import axios into the component where we will perform our API call - <code>views/Pets.vue</code>. In that component's script block, add this line:</p><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
</code></pre><p>All our calls will use the same base URL with different endpoints. Right under the import for axios, add the base URL to Axios' options:</p><pre class="language-js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&quot;https://dog.ceo/api&quot;</span><span class="token punctuation">;</span>
</code></pre><p>Now we are ready to make our first API call.</p><h2 id="call-the-api"><a href="#call-the-api" aria-hidden="true" class="header-anchor">#</a> Call the API</h2><p>Let's replace the first static image with the random Husky picture from the Dog CEO API. First we have to check which endpoint we have to use. Looking at the API's <a href="https://dog.ceo/dog-api/" target="_blank" rel="noopener noreferrer">documentation</a> we can find out that we need to append <code>/breed/husky/images/random</code> to the base API call (the <code>api</code> part is already in our base URL).</p><p>We want a new image to replace the old one right when the component is created, so let's add a <code>created()</code> hook right after <code>data</code>:</p><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">üí°</p><p>Note: Make sure to add a comma after the data object and then add the created() hook!</p></div><div class="tip custom-block"><p class="custom-block-title">üí°</p><p>This is our app's first livecycle hook! These are very useful when you want fine control over when to run blocks of code. Read more <a href="https://vuejs.org/v2/guide/instance.html#Instance-Lifecycle-Hooks" target="_blank" rel="noopener noreferrer">here</a></p></div><p>Inside the created hook we will add our first query to the API. To perform a GET request Axios uses the <code>axios.get</code> method. The result will be a JavaScript promise, so we have to provide success and failure callbacks to it. For now, let's simply print the query result to console. Edit <code>created(){}</code> by placing this snippet between the curly brackets:</p><pre class="language-js"><code>  axios
    <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/breed/husky/images/random&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>In the browser view in Code Sandbox, switch to the Pets tab. You should see an object in your console. Drill into it by clicking its left-hand arrow. We are interested in its <code>data</code> field. You can see we have a status <code>success</code> and a message with an image URL (you can copy/paste it to your browser and discover a cute Husky).</p><h2 id="use-the-api-1-replace-some-of-the-static-data"><a href="#use-the-api-1-replace-some-of-the-static-data" aria-hidden="true" class="header-anchor">#</a> Use the API 1 - Replace Some of the Static Data</h2><p>Let's replace our Husky image with this new one. First, we should find a Husky in our dogs array with an <code>Array.find</code> method. It will check the <code>dogs</code> array items that we are already loading into the component from the <code>data/dogs.js</code> data file one by one to find the first item matching provided criteria. In our case the criteria is a <code>breed</code> equal to <code>husky</code>. Replace the <code>console.log()</code> inside the <code>then</code> callback in the Axios call we just implemented with this string:</p><pre class="language-js"><code><span class="token keyword">const</span> husky <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>dog <span class="token operator">=&gt;</span> dog<span class="token punctuation">.</span>breed <span class="token operator">===</span> <span class="token string">'husky'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>husky<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Ok, we have found a husky, which you can see in the <code>console.log()</code>. You can also see him in your app's Pets page - look for 'Max', listed as a husky. Now let's provide him with a new image by reassigning the image url from the static data to data coming from the API. Add this line under the snippet you just added.</p><pre class="language-js"><code>husky<span class="token punctuation">.</span>img <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
</code></pre><p>You should see the image change to a random husky image pulled from the Dog CEO API.</p><h2 id="use-the-api-2-randomize-the-images"><a href="#use-the-api-2-randomize-the-images" aria-hidden="true" class="header-anchor">#</a> Use the API 2- Randomize the Images</h2><p>Let's try to load a random image for each dog in our <code>dogs</code> array. The first thing we need is a proper endpoint for each breed we have. We will create an array of links using the <code>.map</code> method.</p><div class="tip custom-block"><p class="custom-block-title">üí°</p><p>The <code>map()</code> method creates a new array with the results of calling a provided function on every element in the calling array.</p></div><p>Overwrite the code in the <code>Created()</code>...<code>.then</code> by creating this linksArray constant:</p><pre class="language-js"><code><span class="token keyword">const</span> linksArray <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
   dog <span class="token operator">=&gt;</span> <span class="token string">&quot;/breed/&quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span>breed <span class="token operator">+</span> <span class="token string">&quot;/images/random&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>We're taking the breed of each dog in the array and inserting it inside the endpoint string (we used the same one previously for husky, but <code>breed</code> was hard-coded to a static value there).</p><p>At this point, we have to perform multiple API calls using all the links we've just created - as many API calls as exist in our static data. Axios has a helper functions for this case called <code>axios.all</code> and <code>axios.spread</code>. We will provide an array of our requests to the first one; it will return an array of responses and we should use <code>axios.spread</code> to spread this array into multiple arguments. To create an array of queries we will use a <code>.map</code> method on our <code>linksArray</code>, performing <code>axios.get</code> for each link. Add this snippet right under the linksArray snippet you added just before.</p><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>linksArray<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>link <span class="token operator">=&gt;</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
     axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         dog<span class="token punctuation">.</span>img <span class="token operator">=</span> res<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">üí°</p><p>What's going on here? The forEach() method executes a provided function once for each array element in linksArray. It's basically looping through the static data and adding a random image to <code>this.dogs</code>. So, after we've got an array of images in response, we are iterating through our <code>dogs</code> array again, replacing each dog image with a corresponding new one from the API (<code>index</code> is the index of the current element being processed in the array; it is the same for both arrays because response objects are placed in the same order they were sent).</p></div><p>Now we have new images each time our <code>Pets</code> component is created (you can see the images change on page refresh or simply by switching the tabs from <code>pets</code> to <code>home</code> and back). The dogs' names and breeds are still being drawn from static data, but the images are coming from the API, matched with the static dog's breed.</p><p>The only remaining problem is that we can still see old images for a short moment when we enter the pets tab. Let's clear the dogs images before we perform a query. Add this string as the first one inside the <code>created()</code> hook:</p><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>dog <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     dog<span class="token punctuation">.</span>img <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><strong>Now we initially see empty dog portraits and then images are loaded from the API. Progress!</strong></p><h1 id="final-result"><a href="#final-result" aria-hidden="true" class="header-anchor">#</a> Final result</h1><p><img src="/docs/assets/img/petshop_chapter3.f1a4212c.jpg" alt="chapter 3 result"></p></div><div class="content edit-link"><a href="https://github.com/vuevixens/docs/edit/master//workshop/ch3.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ‚Üê <a href="/docs/workshop/ch2.html" class="prev">
          üê∂ Chapter 2: Build a Pet Gallery
        </a></span><span class="next"><a href="/docs/workshop/ch4.html">
          üê∂ Chapter 4: Create a Dog Adoption Experience
        </a> ‚Üí
      </span></p></div></div></div></div>
    <script src="/docs/assets/js/7.3168eb2d.js" defer></script><script src="/docs/assets/js/app.7918803b.js" defer></script>
  </body>
</html>
